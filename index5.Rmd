---
title: "Citi bike on Social Media"
output: html_document
---

```{r, message=FALSE, echo=FALSE, warning=FALSE}
load("data/citi.RData")
library(ggplot2)
library(Matrix)
library(wordcloud2)
library(wordcloud)
library(plotly)
```

### Word Frequency

We searched Tweets via Twitter API as a sample to study the image of Citibike in social media. Due to the restriction of Twitter Search API we could only fetch tweets after two weeks ago. In total we got 461 tweets. The number shows that Citibike is not a hot topic on Twitter.

```{r, message=FALSE, echo=FALSE, warning=FALSE}
ggplot(td_freq, aes(term, n)) +
  geom_bar(stat = "identity", fill = "blue") +
  ggtitle("Frequent Words for Citibike") + xlab(NULL) + ylab("Frequency") + 
  coord_flip() + theme_classic()
```

This is the top frequent words in the cleaned Tweets content, after eliminating Citibike related words like "citibike", "bike", etc. The most frequent words during last two weeks are about Citibike's one-day-free-pass campaign on the Earth Day on April 22nd. In addition, #cargreenyc tag and Brooklyn are strongly related topic. 

```{r, message=FALSE, echo=FALSE, warning=FALSE}
set.seed(1234)
wordcloud2(data = FreqMat, minSize = 5, gridSize = 5, size = 0.5)
```

This is an interactive wordcloud of words usage in Citibike related tweets. Interesting words: mastercard, picnic, weather, celebr, healthier...

### Sentiment Analysis

```{r, message=FALSE, echo=FALSE, warning=FALSE}
<<<<<<< HEAD
plot_senti
=======
ggplotly(plot_senti)
>>>>>>> origin/master
```

We used Liu's lexicon, which contains near 7000 words, for positive/negative words analysis. The interactive plot above demonstrates the result of sentiment analysis to Tweets related to Citibike. The average score in last two weeks remained slightly positive. While a lot of tweets don't have specific sentiment keywords.

```{r, message=FALSE, echo=FALSE, warning=FALSE}
set.seed(4321)
comparison.cloud(v_corpus_m, max.words = 200, title.size = 1, colors = c("orange", "blue"))
```

The comparison cloud shows what negative tweets are talking about. It turns out that some of them are talking about health issues like "heart" and "cancer", which we supposed are actually positive to Citibike. But the cloud also has "risk", "work" as well as "broken", "steal" and "ruin", which need attention from Citibike management to see what happened/should be improved. 


